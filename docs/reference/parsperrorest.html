<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform spatial error estimation and variable importance assessment — parsperrorest • sperrorest</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sperrorest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform spatial error estimation and variable importance assessment</h1>
    </div>

    
    <p><code>parsperrorest</code> is a flexible interface for multiple types of
parallelized spatial and non-spatial cross-validation
and bootstrap error estimation and parallelized permutation-based
assessment of spatial variable importance.</p>
    

    <pre><span class='fu'>parsperrorest</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='kw'>coords</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>), <span class='no'>model.fun</span>,
  <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pred.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.loo</span>, <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>train.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>train.param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>test.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>test.param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>err.fun</span> <span class='kw'>=</span> <span class='no'>err.default</span>, <span class='kw'>error.fold</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>error.rep</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>err.train</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>imp.variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>imp.permutations</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>importance</span> <span class='kw'>=</span> !<span class='fu'>is.null</span>(<span class='no'>imp.variables</span>), <span class='kw'>distance</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>do.gc</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>do.try</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>out.progress</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>notify</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>par.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>benchmark</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>formula</dt>
      <dd>A formula specifying the variables used by the <code>model</code>.
Only simple formulas without interactions or nonlinear terms should
be used, e.g. <code>y~x1+x2+x3</code> but not <code>y~x1*x2+log(x3)</code>.
Formulas involving interaction and nonlinear terms may possibly work
for error estimation but not for variable importance assessment,
but should be used with caution.</dd>
      <dt>data</dt>
      <dd>a <code>data.frame</code> with predictor and response variables.
Training and test samples will be drawn from this data set by <code>train.fun</code>
and <code>test.fun</code>, respectively.</dd>
      <dt>coords</dt>
      <dd>vector of length 2 defining the variables in <code>data</code> that
contain the x and y coordinates of sample locations.</dd>
      <dt>model.fun</dt>
      <dd>Function that fits a predictive model, such as <code>glm</code>
or <code>rpart</code>. The function must accept at least two arguments, the first
one being a formula and the second a data.frame with the learning sample.</dd>
      <dt>model.args</dt>
      <dd>Arguments to be passed to <code>model.fun</code>
(in addition to the <code>formula</code> and <code>data</code> argument,
which are provided by <code>sperrorest</code>)</dd>
      <dt>pred.fun</dt>
      <dd>Prediction function for a fitted model object created
by <code>model</code>. Must accept at least two arguments: the fitted
<code>object</code> and a <code>data.frame</code> <code>newdata</code> with data
on which to predict the outcome.</dd>
      <dt>pred.args</dt>
      <dd>(optional) Arguments to <code>pred.fun</code> (in addition to the
fitted model object and the <code>newdata</code> argument,
which are provided by <code>sperrorest</code>)</dd>
      <dt>smp.fun</dt>
      <dd>A function for sampling training and test sets from
<code>data</code>. E.g., <code><a href='partition.kmeans.html'>partition.kmeans()</a></code> for
spatial cross-validation using spatial <em>k</em>-means clustering.</dd>
      <dt>smp.args</dt>
      <dd>(optional) Arguments to be passed to <code>est.fun</code></dd>
      <dt>train.fun</dt>
      <dd>(optional) A function for resampling or subsampling the
training sample in order to achieve, e.g., uniform sample sizes on all
training sets, or maintaining a certain ratio of positives and negatives
in training sets.
E.g., <code><a href='resample.uniform.html'>resample.uniform()</a></code> or <code><a href='resample.strat.uniform.html'>resample.strat.uniform()</a></code></dd>
      <dt>train.param</dt>
      <dd>(optional) Arguments to be passed to <code>resample.fun</code></dd>
      <dt>test.fun</dt>
      <dd>(optional) Like <code>train.fun</code> but for the test set.</dd>
      <dt>test.param</dt>
      <dd>(optional) Arguments to be passed to <code>test.fun</code></dd>
      <dt>err.fun</dt>
      <dd>A function that calculates selected error measures from the
known responses in <code>data</code> and the model predictions delivered
by <code>pred.fun</code>. E.g., <code><a href='err.default.html'>err.default()</a></code> (the default).
See example and details below.</dd>
      <dt>error.fold</dt>
      <dd>logical (default: <code>TRUE</code>) if <code>importance</code> is
<code>TRUE</code>, otherwise <code>FALSE</code>): calculate error measures on each fold
within a resampling repetition.</dd>
      <dt>error.rep</dt>
      <dd>logical (default: <code>TRUE</code>): calculate error measures
based on the pooled predictions of all folds within a resampling repetition.</dd>
      <dt>err.train</dt>
      <dd>logical (default: <code>TRUE</code>): calculate error measures on
the training set (in addition to the test set estimation).</dd>
      <dt>imp.variables</dt>
      <dd>(optional; used if <code>importance = TRUE</code>)
Variables for which permutation-based variable importance assessment
is performed. If <code>importance = TRUE</code> and <code>imp.variables</code> is
<code>NULL</code>, all variables in <code>formula</code> will be used.</dd>
      <dt>imp.permutations</dt>
      <dd>(optional; used if <code>importance = TRUE</code>)
Number of permutations used for variable importance assessment.</dd>
      <dt>importance</dt>
      <dd>logical: perform permutation-based variable
importance assessment?</dd>
      <dt>distance</dt>
      <dd>logical (default: <code>FALSE</code>): if <code>TRUE</code>, calculate
mean nearest-neighbour distances from test samples to training samples using
<code><a href='add.distance.html'>add.distance.represampling()</a></code></dd>
      <dt>do.gc</dt>
      <dd>numeric (default: 1): defines frequency of memory garbage
collection by calling <code>gc()</code>; if <code>&lt;1</code>, no garbage collection;
if <code>&gt;=1</code>, run a <code>gc()</code> after each repetition;
if <code>&gt;=2</code>, after each fold</dd>
      <dt>do.try</dt>
      <dd>logical (default: <code>FALSE</code>): if <code>TRUE</code> (untested!!),
use <code>try()</code> to robustify calls to <code>model.fun</code> and
<code>err.fun</code>; use with caution!</dd>
      <dt>progress</dt>
      <dd>numeric (default: <code>1</code>): Whether to show progress
information. For <code>par.mode = 1</code>, information about elapsed time, estimated time remaining and a
percentage indicator (0% - 100%) are shown.
<code>progress = 2</code> only applies to <code>par.mode = 2</code> and shows repetition
information only (instead of repetition and fold).
Set to <code>FALSE</code> for no progress information.</dd>
      <dt>out.progress</dt>
      <dd>only used if <code>par.mode = 2</code>: Optionally write progress output to a file instead of console output.
The default (<code>&#39;&#39;</code>) results in console output for Unix-systems and
file output (&#39;parsperrorest.progress.txt&#39;) in the current working directory
for Windows-systems.</dd>
      <dt>notify</dt>
      <dd>(optional) show a notification badge after <code>parsperrorest()</code> has finished.</dd>
      <dt>par.args</dt>
      <dd>list of parallelization parameters:
<code>par.mode</code> (the parallelization mode),
<code>par.units</code> (the number of parallel processing units),
<code>par.libs</code> (libraries to be loaded on cluster workers, character list).
See Details for more information.</dd>
      <dt>benchmark</dt>
      <dd>(optional) logical (default: <code>FALSE</code>): if <code>TRUE</code>,
perform benchmarking and return <code>sperrorestbenchmarks</code> object</dd>
      <dt>...</dt>
      <dd>currently not used</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list (object of class <code>sperrorest</code>) with (up to) six components:</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Two <code>par.mode</code> options are availabe. The default mode is
<code>par.mode = 1</code>. Here, <code><a href='http://www.rdocumentation.org/packages/pbapply/topics/pbapply'>pbapply::pblapply()</a></code> is used which
either calls <code><a href='http://www.rdocumentation.org/packages/parallel/topics/mclapply'>parallel::mclapply()</a></code> (on Unix-systems) or
<code><a href='http://www.rdocumentation.org/packages/parallel/topics/clusterApply'>parallel::parApply()</a></code> (on Windows-systems). <code>par.mode = 2</code>
uses <code><a href='http://www.rdocumentation.org/packages/foreach/topics/foreach'>foreach::foreach()</a></code>. While this approach is not as efficient,
it may work in cases in which <code>par.mode = 1</code> fails.</p>
    <p><code>par.libs</code> only applies to <code>par.mode = 1</code> on Windows-systems.</p>
    <p>This parallelized version of <code><a href='sperrorest.html'>sperrorest()</a></code> may highly
decrease computation time. However, please note that problems
may occur depending on which function is used for cross-validation.
While the <code><a href='http://www.rdocumentation.org/packages/rpart/topics/rpart'>rpart::rpart()</a></code> example (see Examples) here works fine, you may
encounter problems with other functions.</p>
    <p>For <code>par.mode = 2</code>, you may encounter missing repetitions in the results
if repetitions finish to quickly. In this case, consider using
<code><a href='sperrorest.html'>sperrorest()</a></code></p>
    <p>Known problems when being parallized: <code><a href='http://www.rdocumentation.org/packages/randomForest/topics/randomForest'>randomForest::randomForest()</a></code></p>
    <p>If you define a custom <code>pred.fun</code> which conists of multiple custom
defined child functions, make sure to define <code>pred.fun</code> and all child
functions in one call. Otherwise you will encounter errors in <code>par.mode = 2</code>
caused by how <code>foreach</code> loads the parent environment.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>(1) Optionally save fitted models, training and test samples in the
results object; (2) Optionally save intermediate results in some file, and
enable the function to continue an interrupted sperrorest call where it
was interrupted. (3) Optionally have sperrorest dump the result of each
repetition into a file, and to skip repetitions for which a file already exists.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Brenning, A. 2012. Spatial cross-validation and bootstrap for
the assessment of prediction rules in remote sensing: the R package &#39;sperrorest&#39;.
2012 IEEE International Geoscience and Remote Sensing Symposium (IGARSS),
23-27 July 2012, p. 5372-5375.</p>
    <p>Brenning, A. 2005. Spatial prediction models for landslide hazards: review,
comparison and evaluation. Natural Hazards and Earth System Sciences, 5(6): 853-862.</p>
    <p>Brenning, A., S. Long &amp; P. Fieguth. Forthcoming. Detecting rock glacier flow
structures using Gabor filters and IKONOS imagery.
Submitted to Remote Sensing of Environment.</p>
    <p>Russ, G. &amp; A. Brenning. 2010a. Data mining in precision agriculture:
Management of spatial information. In 13th International Conference on
Information Processing and Management of Uncertainty, IPMU 2010; Dortmund;
28 June - 2 July 2010. Lecture Notes in Computer Science, 6178 LNAI: 350-359.</p>
    <p>Russ, G. &amp; A. Brenning. 2010b. Spatial variable importance assessment for
yield prediction in Precision Agriculture. In Advances in Intelligent
Data Analysis IX, Proceedings, 9th International Symposium,
IDA 2010, Tucson, AZ, USA, 19-21 May 2010.
Lecture Notes in Computer Science, 6065 LNCS: 184-195.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='sperrorest.html'>sperrorest()</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>ecuador</span>) <span class='co'># Muenchow et al. (2012), see ?ecuador</span>
<span class='no'>fo</span> <span class='kw'>&lt;-</span> <span class='no'>slides</span> ~ <span class='no'>dem</span> + <span class='no'>slope</span> + <span class='no'>hcurv</span> + <span class='no'>vcurv</span> + <span class='no'>log.carea</span> + <span class='no'>cslope</span>

<span class='co'># Example of a classification tree fitted to this data:</span>
<span class='fu'>library</span>(<span class='no'>rpart</span>)
<span class='no'>mypred.rpart</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>, <span class='no'>newdata</span>) <span class='fu'>predict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>)[, <span class='fl'>2</span>]
<span class='no'>ctrl</span> <span class='kw'>&lt;-</span> <span class='fu'>rpart.control</span>(<span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.005</span>) <span class='co'># show the effects of overfitting</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>rpart</span>(<span class='no'>fo</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>)

<span class='co'># Non-spatial 5-repeated 10-fold cross-validation:</span>
<span class='no'>mypred.rpart</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>, <span class='no'>newdata</span>) <span class='fu'>predict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>)[,<span class='fl'>2</span>]
<span class='no'>par.nsp.res</span> <span class='kw'>&lt;-</span> <span class='fu'>parsperrorest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>fo</span>,
                             <span class='kw'>model.fun</span> <span class='kw'>=</span> <span class='no'>rpart</span>, <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>),
                             <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='no'>mypred.rpart</span>,
                             <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                             <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.cv</span>,
                             <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>repetition</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>15</span>),
                             <span class='kw'>par.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>par.units</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>par.mode</span> <span class='kw'>=</span> <span class='fl'>1</span>),
                             <span class='kw'>error.rep</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>error.fold</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;   |+++++++++++++++++                                 | 33% elapsed =05s, remaining ~10s  |++++++++++++++++++++++++++++++++++                | 67% elapsed =09s, remaining ~05s  |++++++++++++++++++++++++++++++++++++++++++++++++++| 100% elapsed =12s, remaining ~00s</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.nsp.res</span>$<span class='no'>error.rep</span>)</div><div class='output co'>#&gt;                           mean          sd       median         IQR
#&gt; train.auroc       7.410875e-01 0.003862250 7.399036e-01 0.002177564
#&gt; train.error       2.994357e-01 0.003661315 2.998214e-01 0.002035714
#&gt; train.accuracy    7.005643e-01 0.003661315 7.001786e-01 0.002035714
#&gt; train.sensitivity 6.710571e-01 0.014473709 6.736429e-01 0.009000000
#&gt; train.specificity 7.300714e-01 0.010551018 7.272857e-01 0.005071429
#&gt; train.fpr70       3.141286e-01 0.013459823 3.130000e-01 0.013642857
#&gt; train.fpr80       4.911571e-01 0.019435621 4.905000e-01 0.015071429
#&gt; train.fpr90       6.865143e-01 0.017442135 6.918571e-01 0.031071429
#&gt; train.tpr80       5.535571e-01 0.007410762 5.535714e-01 0.010714286
#&gt; train.tpr90       3.246286e-01 0.007628224 3.252857e-01 0.006000000
#&gt; train.tpr95       1.878571e-01 0.008143797 1.905000e-01 0.009000000
#&gt; train.events      1.400000e+04 0.000000000 1.400000e+04 0.000000000
#&gt; train.count       2.800000e+04 0.000000000 2.800000e+04 0.000000000
#&gt; test.auroc        6.476167e-01 0.004606886 6.481540e-01 0.004566500
#&gt; test.error        3.766000e-01 0.003029026 3.765000e-01 0.002500000
#&gt; test.accuracy     6.234000e-01 0.003029026 6.235000e-01 0.002500000
#&gt; test.sensitivity  5.924000e-01 0.011928956 5.940000e-01 0.006000000
#&gt; test.specificity  6.544000e-01 0.015043271 6.550000e-01 0.020000000
#&gt; test.fpr70        5.048000e-01 0.021970435 4.940000e-01 0.031000000
#&gt; test.fpr80        6.324000e-01 0.014621901 6.330000e-01 0.016000000
#&gt; test.fpr90        7.988000e-01 0.015959323 8.000000e-01 0.001000000
#&gt; test.tpr80        4.142000e-01 0.007463243 4.130000e-01 0.003000000
#&gt; test.tpr90        1.840000e-01 0.016673332 1.930000e-01 0.019000000
#&gt; test.tpr95        9.840000e-02 0.007092249 1.000000e-01 0.013000000
#&gt; test.events       1.000000e+03 0.000000000 1.000000e+03 0.000000000
#&gt; test.count        2.000000e+03 0.000000000 2.000000e+03 0.000000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.nsp.res</span>$<span class='no'>error.fold</span>)</div><div class='output co'>#&gt;                            mean         sd        median        IQR
#&gt; train.auroc          0.73524357 0.02236125    0.74203767 0.02745061
#&gt; train.error          0.29943593 0.01640904    0.29528403 0.02143049
#&gt; train.accuracy       0.70056407 0.01640904    0.70471597 0.02143049
#&gt; train.sensitivity    0.67098691 0.05465183    0.67773019 0.07410212
#&gt; train.specificity    0.73005250 0.03653538    0.72540541 0.04369640
#&gt; train.fpr70          0.47350031 0.21604559    0.37473002 0.27585023
#&gt; train.fpr80          0.62166540 0.15053977    0.59913793 0.25329279
#&gt; train.fpr90          0.75407281 0.08245299    0.73650794 0.13372788
#&gt; train.tpr80          0.50500074 0.06071390    0.51502146 0.08620790
#&gt; train.tpr90          0.14929488 0.10720025    0.11158342 0.12926901
#&gt; train.tpr95          0.09765495 0.05368679    0.09324759 0.08147455
#&gt; train.events       933.33333333 5.44588447  934.00000000 8.00000000
#&gt; train.count       1866.66666667 0.47457900 1867.00000000 1.00000000
#&gt; test.auroc           0.64606504 0.04442818    0.64564007 0.04853172
#&gt; test.error           0.37659896 0.03865435    0.37593985 0.04626305
#&gt; test.accuracy        0.62340104 0.03865435    0.62406015 0.04626305
#&gt; test.sensitivity     0.59287726 0.07759705    0.57812500 0.10735931
#&gt; test.specificity     0.65488138 0.07683303    0.66666667 0.10652459
#&gt; test.fpr70           0.63187646 0.18151324    0.60759494 0.32247710
#&gt; test.fpr80           0.74771412 0.12874986    0.75000000 0.17602085
#&gt; test.fpr90           0.84739378 0.08995144    0.86486486 0.12661776
#&gt; test.tpr80           0.33125520 0.14187780    0.37096774 0.16985369
#&gt; test.tpr90           0.11644909 0.09772018    0.08620690 0.09575636
#&gt; test.tpr95           0.05877681 0.03876634    0.05357143 0.05418530
#&gt; test.events         66.66666667 5.44588447   66.00000000 8.00000000
#&gt; test.count         133.33333333 0.47457900  133.00000000 1.00000000
#&gt; distance            -1.00000000 0.00000000   -1.00000000 0.00000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.nsp.res</span>$<span class='no'>represampling</span>)</div><div class='output co'>#&gt; $`1`
#&gt;    n.train n.test
#&gt; 1     1866    134
#&gt; 2     1867    133
#&gt; 3     1867    133
#&gt; 4     1867    133
#&gt; 5     1866    134
#&gt; 6     1867    133
#&gt; 7     1867    133
#&gt; 8     1867    133
#&gt; 9     1866    134
#&gt; 10    1867    133
#&gt; 11    1866    134
#&gt; 12    1866    134
#&gt; 13    1867    133
#&gt; 14    1867    133
#&gt; 15    1867    133
#&gt; 
#&gt; $`2`
#&gt;    n.train n.test
#&gt; 1     1867    133
#&gt; 2     1866    134
#&gt; 3     1867    133
#&gt; 4     1867    133
#&gt; 5     1867    133
#&gt; 6     1867    133
#&gt; 7     1867    133
#&gt; 8     1867    133
#&gt; 9     1867    133
#&gt; 10    1867    133
#&gt; 11    1866    134
#&gt; 12    1867    133
#&gt; 13    1866    134
#&gt; 14    1866    134
#&gt; 15    1866    134
#&gt; 
#&gt; $`3`
#&gt;    n.train n.test
#&gt; 1     1866    134
#&gt; 2     1867    133
#&gt; 3     1866    134
#&gt; 4     1867    133
#&gt; 5     1867    133
#&gt; 6     1866    134
#&gt; 7     1867    133
#&gt; 8     1866    134
#&gt; 9     1867    133
#&gt; 10    1866    134
#&gt; 11    1867    133
#&gt; 12    1867    133
#&gt; 13    1867    133
#&gt; 14    1867    133
#&gt; 15    1867    133
#&gt; 
#&gt; $`4`
#&gt;    n.train n.test
#&gt; 1     1866    134
#&gt; 2     1866    134
#&gt; 3     1867    133
#&gt; 4     1867    133
#&gt; 5     1867    133
#&gt; 6     1866    134
#&gt; 7     1867    133
#&gt; 8     1866    134
#&gt; 9     1867    133
#&gt; 10    1867    133
#&gt; 11    1867    133
#&gt; 12    1867    133
#&gt; 13    1867    133
#&gt; 14    1866    134
#&gt; 15    1867    133
#&gt; 
#&gt; $`5`
#&gt;    n.train n.test
#&gt; 1     1867    133
#&gt; 2     1867    133
#&gt; 3     1867    133
#&gt; 4     1866    134
#&gt; 5     1866    134
#&gt; 6     1867    133
#&gt; 7     1866    134
#&gt; 8     1867    133
#&gt; 9     1866    134
#&gt; 10    1867    133
#&gt; 11    1866    134
#&gt; 12    1867    133
#&gt; 13    1867    133
#&gt; 14    1867    133
#&gt; 15    1867    133
#&gt; </div><div class='input'><span class='co'># plot(par.nsp.res$represampling, ecuador)</span>

<span class='co'># Spatial 5-repeated 10-fold spatial cross-validation:</span>
<span class='no'>par.sp.res</span> <span class='kw'>&lt;-</span> <span class='fu'>parsperrorest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>fo</span>,
                            <span class='kw'>model.fun</span> <span class='kw'>=</span> <span class='no'>rpart</span>, <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>),
                            <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='no'>mypred.rpart</span>,
                            <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                            <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.kmeans</span>,
                            <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>repetition</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>15</span>),
                            <span class='kw'>par.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>par.units</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>par.mode</span> <span class='kw'>=</span> <span class='fl'>2</span>),
                            <span class='kw'>error.rep</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>error.fold</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; Sun Feb 19 21:31:03 2017 Done.</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.sp.res</span>$<span class='no'>error.rep</span>)</div><div class='output co'>#&gt;                           mean          sd       median          IQR
#&gt; train.auroc       7.496999e-01 0.002542707 7.504402e-01 0.0007962092
#&gt; train.error       2.956643e-01 0.001722932 2.948214e-01 0.0005357143
#&gt; train.accuracy    7.043357e-01 0.001722932 7.051786e-01 0.0005357143
#&gt; train.sensitivity 6.786429e-01 0.008807030 6.782143e-01 0.0099285714
#&gt; train.specificity 7.300286e-01 0.009079664 7.290000e-01 0.0142857143
#&gt; train.fpr70       3.081429e-01 0.006468724 3.080000e-01 0.0076428571
#&gt; train.fpr80       4.741714e-01 0.009624268 4.717857e-01 0.0114285714
#&gt; train.fpr90       6.613286e-01 0.006475149 6.622857e-01 0.0051428571
#&gt; train.tpr80       5.578714e-01 0.011158117 5.556429e-01 0.0123571429
#&gt; train.tpr90       3.558000e-01 0.004643242 3.572143e-01 0.0009285714
#&gt; train.tpr95       1.464143e-01 0.049086357 1.662857e-01 0.0790000000
#&gt; train.events      1.400000e+04 0.000000000 1.400000e+04 0.0000000000
#&gt; train.count       2.800000e+04 0.000000000 2.800000e+04 0.0000000000
#&gt; test.auroc        5.601145e-01 0.004464785 5.619010e-01 0.0044570000
#&gt; test.error        4.482000e-01 0.006496153 4.455000e-01 0.0065000000
#&gt; test.accuracy     5.518000e-01 0.006496153 5.545000e-01 0.0065000000
#&gt; test.sensitivity  5.056000e-01 0.010549882 5.050000e-01 0.0100000000
#&gt; test.specificity  5.980000e-01 0.015443445 6.040000e-01 0.0170000000
#&gt; test.fpr70        6.480000e-01 0.009797959 6.470000e-01 0.0070000000
#&gt; test.fpr80        7.654000e-01 0.014328294 7.700000e-01 0.0140000000
#&gt; test.fpr90        8.906000e-01 0.011970798 8.890000e-01 0.0090000000
#&gt; test.tpr80        2.606000e-01 0.028562213 2.600000e-01 0.0270000000
#&gt; test.tpr90        1.164000e-01 0.046548899 1.190000e-01 0.0830000000
#&gt; test.tpr95        6.160000e-02 0.016801786 6.100000e-02 0.0090000000
#&gt; test.events       1.000000e+03 0.000000000 1.000000e+03 0.0000000000
#&gt; test.count        2.000000e+03 0.000000000 2.000000e+03 0.0000000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.sp.res</span>$<span class='no'>error.fold</span>)</div><div class='output co'>#&gt;                            mean          sd        median         IQR
#&gt; train.auroc          0.74385225  0.02391961    0.74961076  0.04065904
#&gt; train.error          0.29569528  0.01862702    0.29027113  0.03143194
#&gt; train.accuracy       0.70430472  0.01862702    0.70972887  0.03143194
#&gt; train.sensitivity    0.67805133  0.06154342    0.68861024  0.09969122
#&gt; train.specificity    0.72985327  0.04029980    0.73178458  0.04013168
#&gt; train.fpr70          0.43350026  0.19294804    0.34537726  0.20144202
#&gt; train.fpr80          0.55884701  0.14078768    0.52339499  0.14824653
#&gt; train.fpr90          0.76403607  0.09410692    0.77152318  0.16957930
#&gt; train.tpr80          0.51288208  0.06626049    0.52312775  0.10237824
#&gt; train.tpr90          0.28205862  0.10411569    0.32683983  0.12513468
#&gt; train.tpr95          0.07781421  0.04498173    0.06152242  0.05697041
#&gt; train.events       933.33333333 25.17470488  934.00000000 31.50000000
#&gt; train.count       1866.66666667 26.80325380 1868.00000000 32.00000000
#&gt; test.auroc           0.54348405  0.06948049    0.54044118  0.10417840
#&gt; test.error           0.44846996  0.07615030    0.46236559  0.11204014
#&gt; test.accuracy        0.55153004  0.07615030    0.53763441  0.11204014
#&gt; test.sensitivity     0.48388989  0.26516235    0.44186047  0.31264545
#&gt; test.specificity     0.58768195  0.19391887    0.61016949  0.26278519
#&gt; test.fpr70           0.75872579  0.15471891    0.76056338  0.20947264
#&gt; test.fpr80           0.83689699  0.11995890    0.84507042  0.20983943
#&gt; test.fpr90           0.90951376  0.09020068    0.94736842  0.12976221
#&gt; test.tpr80           0.11867267  0.12223320    0.10000000  0.14957112
#&gt; test.tpr90           0.03325227  0.04671940    0.01587302  0.05063291
#&gt; test.tpr95           0.02074698  0.03227142    0.00000000  0.02312216
#&gt; test.events         66.66666667 25.17470488   66.00000000 31.50000000
#&gt; test.count         133.33333333 26.80325380  132.00000000 32.00000000
#&gt; distance            -1.00000000  0.00000000   -1.00000000  0.00000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>par.sp.res</span>$<span class='no'>represampling</span>)</div><div class='output co'>#&gt; $`1`
#&gt;    n.train n.test
#&gt; 1     1876    124
#&gt; 2     1865    135
#&gt; 3     1898    102
#&gt; 4     1833    167
#&gt; 5     1870    130
#&gt; 6     1883    117
#&gt; 7     1875    125
#&gt; 8     1884    116
#&gt; 9     1885    115
#&gt; 10    1857    143
#&gt; 11    1849    151
#&gt; 12    1839    161
#&gt; 13    1867    133
#&gt; 14    1847    153
#&gt; 15    1872    128
#&gt; 
#&gt; $`2`
#&gt;    n.train n.test
#&gt; 1     1819    181
#&gt; 2     1861    139
#&gt; 3     1841    159
#&gt; 4     1874    126
#&gt; 5     1899    101
#&gt; 6     1916     84
#&gt; 7     1881    119
#&gt; 8     1863    137
#&gt; 9     1914     86
#&gt; 10    1850    150
#&gt; 11    1862    138
#&gt; 12    1856    144
#&gt; 13    1879    121
#&gt; 14    1838    162
#&gt; 15    1847    153
#&gt; 
#&gt; $`3`
#&gt;    n.train n.test
#&gt; 1     1863    137
#&gt; 2     1856    144
#&gt; 3     1872    128
#&gt; 4     1923     77
#&gt; 5     1893    107
#&gt; 6     1877    123
#&gt; 7     1868    132
#&gt; 8     1882    118
#&gt; 9     1868    132
#&gt; 10    1893    107
#&gt; 11    1854    146
#&gt; 12    1856    144
#&gt; 13    1791    209
#&gt; 14    1848    152
#&gt; 15    1856    144
#&gt; 
#&gt; $`4`
#&gt;    n.train n.test
#&gt; 1     1876    124
#&gt; 2     1859    141
#&gt; 3     1866    134
#&gt; 4     1837    163
#&gt; 5     1881    119
#&gt; 6     1807    193
#&gt; 7     1878    122
#&gt; 8     1899    101
#&gt; 9     1847    153
#&gt; 10    1851    149
#&gt; 11    1858    142
#&gt; 12    1921     79
#&gt; 13    1872    128
#&gt; 14    1855    145
#&gt; 15    1893    107
#&gt; 
#&gt; $`5`
#&gt;    n.train n.test
#&gt; 1     1814    186
#&gt; 2     1835    165
#&gt; 3     1811    189
#&gt; 4     1869    131
#&gt; 5     1833    167
#&gt; 6     1852    148
#&gt; 7     1910     90
#&gt; 8     1887    113
#&gt; 9     1840    160
#&gt; 10    1882    118
#&gt; 11    1888    112
#&gt; 12    1890    110
#&gt; 13    1880    120
#&gt; 14    1896    104
#&gt; 15    1913     87
#&gt; </div><div class='input'><span class='co'># plot(par.sp.res$represampling, ecuador)</span>

<span class='no'>smry</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
    <span class='kw'>nonspat.training</span> <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>par.nsp.res</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>train.auroc</span>),
    <span class='kw'>nonspat.test</span>     <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>par.nsp.res</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>test.auroc</span>),
    <span class='kw'>spatial.training</span> <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>par.sp.res</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>train.auroc</span>),
    <span class='kw'>spatial.test</span>     <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>par.sp.res</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>test.auroc</span>))
<span class='fu'>boxplot</span>(<span class='no'>smry</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'red'</span>,<span class='st'>'red'</span>,<span class='st'>'red'</span>,<span class='st'>'green'</span>),
    <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>'Training vs. test, nonspatial vs. spatial'</span>,
    <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>'Area under the ROC curve'</span>)</div><img src='parsperrorest-18.png' alt='' width='540' height='400' /><div class='input'>    
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alexander Brenning, Patrick Schratz, Tobias Herrmann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
