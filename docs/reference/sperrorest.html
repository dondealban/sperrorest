<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform spatial error estimation and variable importance assessment — sperrorest • sperrorest</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sperrorest</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform spatial error estimation and variable importance assessment</h1>
    </div>

    
    <p><code>sperrorest</code> is a flexible interface for multiple types of spatial and
non-spatial cross-validation and bootstrap error estimation and
permutation-based assessment of spatial variable importance.</p>
    

    <pre><span class='fu'>sperrorest</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='kw'>coords</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"x"</span>, <span class='st'>"y"</span>), <span class='no'>model.fun</span>,
  <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pred.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.loo</span>, <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>train.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>train.param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>test.fun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>test.param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>err.fun</span> <span class='kw'>=</span> <span class='no'>err.default</span>, <span class='kw'>error.fold</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>error.rep</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>err.train</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>imp.variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>imp.permutations</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>importance</span> <span class='kw'>=</span> !<span class='fu'>is.null</span>(<span class='no'>imp.variables</span>), <span class='kw'>distance</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>do.gc</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>do.try</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>benchmark</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>notify</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>formula</dt>
      <dd>A formula specifying the variables used by the <code>model</code>.
Only simple formulas without interactions or nonlinear terms should
be used, e.g. <code>y~x1+x2+x3</code> but not <code>y~x1*x2+log(x3)</code>.
Formulas involving interaction and nonlinear terms may possibly work
for error estimation but not for variable importance assessment,
but should be used with caution.</dd>
      <dt>data</dt>
      <dd>a <code>data.frame</code> with predictor and response variables.
Training and test samples will be drawn from this data set by <code>train.fun</code>
and <code>test.fun</code>, respectively.</dd>
      <dt>coords</dt>
      <dd>vector of length 2 defining the variables in <code>data</code> that
contain the x and y coordinates of sample locations.</dd>
      <dt>model.fun</dt>
      <dd>Function that fits a predictive model, such as <code>glm</code>
or <code>rpart</code>. The function must accept at least two arguments, the first
one being a formula and the second a data.frame with the learning sample.</dd>
      <dt>model.args</dt>
      <dd>Arguments to be passed to <code>model.fun</code>
(in addition to the <code>formula</code> and <code>data</code> argument,
which are provided by <code>sperrorest</code>)</dd>
      <dt>pred.fun</dt>
      <dd>Prediction function for a fitted model object created
by <code>model</code>. Must accept at least two arguments: the fitted
<code>object</code> and a <code>data.frame</code> <code>newdata</code> with data
on which to predict the outcome.</dd>
      <dt>pred.args</dt>
      <dd>(optional) Arguments to <code>pred.fun</code> (in addition to the
fitted model object and the <code>newdata</code> argument,
which are provided by <code>sperrorest</code>)</dd>
      <dt>smp.fun</dt>
      <dd>A function for sampling training and test sets from
<code>data</code>. E.g., <code><a href='partition.kmeans.html'>partition.kmeans()</a></code> for
spatial cross-validation using spatial <em>k</em>-means clustering.</dd>
      <dt>smp.args</dt>
      <dd>(optional) Arguments to be passed to <code>est.fun</code></dd>
      <dt>train.fun</dt>
      <dd>(optional) A function for resampling or subsampling the
training sample in order to achieve, e.g., uniform sample sizes on all
training sets, or maintaining a certain ratio of positives and negatives
in training sets.
E.g., <code><a href='resample.uniform.html'>resample.uniform()</a></code> or <code><a href='resample.strat.uniform.html'>resample.strat.uniform()</a></code></dd>
      <dt>train.param</dt>
      <dd>(optional) Arguments to be passed to <code>resample.fun</code></dd>
      <dt>test.fun</dt>
      <dd>(optional) Like <code>train.fun</code> but for the test set.</dd>
      <dt>test.param</dt>
      <dd>(optional) Arguments to be passed to <code>test.fun</code></dd>
      <dt>err.fun</dt>
      <dd>A function that calculates selected error measures from the
known responses in <code>data</code> and the model predictions delivered
by <code>pred.fun</code>. E.g., <code><a href='err.default.html'>err.default()</a></code> (the default).
See example and details below.</dd>
      <dt>error.fold</dt>
      <dd>logical (default: <code>TRUE</code> if <code>importance</code> is
<code>TRUE</code>, otherwise <code>FALSE</code>): calculate error measures on each fold
within a resampling repetition.</dd>
      <dt>error.rep</dt>
      <dd>logical (default: <code>TRUE</code>): calculate error measures
based on the pooled predictions of all folds within a resampling repetition.</dd>
      <dt>err.train</dt>
      <dd>logical (default: <code>TRUE</code>): calculate error measures on
the training set (in addition to the test set estimation).</dd>
      <dt>imp.variables</dt>
      <dd>(optional; used if <code>importance = TRUE</code>)
Variables for which permutation-based variable importance assessment
is performed. If <code>importance = TRUE</code> and <code>imp.variables</code> is
<code>NULL</code>, all variables in <code>formula</code> will be used.</dd>
      <dt>imp.permutations</dt>
      <dd>(optional; used if <code>importance = TRUE</code>)
Number of permutations used for variable importance assessment.</dd>
      <dt>importance</dt>
      <dd>logical: perform permutation-based variable
importance assessment?</dd>
      <dt>distance</dt>
      <dd>logical (default: <code>FALSE</code>): if <code>TRUE</code>, calculate
mean nearest-neighbour distances from test samples to training samples using
<code><a href='add.distance.html'>add.distance.represampling()</a></code></dd>
      <dt>do.gc</dt>
      <dd>numeric (default: 1): defines frequency of memory garbage
collection by calling <code>gc()</code>; if <code>&lt;1</code>, no garbage collection;
if <code>&gt;=1</code>, run a <code>gc()</code> after each repetition;
if <code>&gt;=2</code>, after each fold</dd>
      <dt>do.try</dt>
      <dd>logical (default: <code>FALSE</code>): if <code>TRUE</code> (untested!!),
use <code>try()</code> to robustify calls to <code>model.fun</code> and
<code>err.fun</code>; use with caution!</dd>
      <dt>progress</dt>
      <dd>if <code>progress = 1</code>, repetition and fold progress is
shown in console (in Windows Rgui, disable &#39;Buffered output&#39; in &#39;Misc&#39; menu).
If <code>progress = 2</code>, only repetition information is shown.
Set to <code>FALSE</code> for no progress information.</dd>
      <dt>benchmark</dt>
      <dd>(optional) logical (default: <code>FALSE</code>): if <code>TRUE</code>,
perform benchmarking and return <code>sperrorestbenchmarks</code> object</dd>
      <dt>notify</dt>
      <dd>(optional) show a notification badge after <code>sperrorest()</code> has finished.</dd>
      <dt>...</dt>
      <dd>currently not used</dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list (object of class <code>sperrorest</code>) with (up to) six components:</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>(1) Optionally save fitted models, training and test samples in the
results object; (2) Optionally save intermediate results in some file, and
enable the function to continue an interrupted sperrorest call where it
was interrupted. (3) Optionally have sperrorest dump the result of each
repetition into a file, and to skip repetitions for which a file already exists.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Brenning, A. 2012. Spatial cross-validation and bootstrap for
the assessment of prediction rules in remote sensing: the R package &#39;sperrorest&#39;.
2012 IEEE International Geoscience and Remote Sensing Symposium (IGARSS),
23-27 July 2012, p. 5372-5375.</p>
    <p>Brenning, A. 2005. Spatial prediction models for landslide hazards: review,
comparison and evaluation. Natural Hazards and Earth System Sciences, 5(6): 853-862.</p>
    <p>Brenning, A., S. Long &amp; P. Fieguth. Forthcoming. Detecting rock glacier flow
structures using Gabor filters and IKONOS imagery.
Submitted to Remote Sensing of Environment.</p>
    <p>Russ, G. &amp; A. Brenning. 2010a. Data mining in precision agriculture:
Management of spatial information. In 13th International Conference on
Information Processing and Management of Uncertainty, IPMU 2010; Dortmund;
28 June - 2 July 2010. Lecture Notes in Computer Science, 6178 LNAI: 350-359.</p>
    <p>Russ, G. &amp; A. Brenning. 2010b. Spatial variable importance assessment for
yield prediction in Precision Agriculture. In Advances in Intelligent
Data Analysis IX, Proceedings, 9th International Symposium,
IDA 2010, Tucson, AZ, USA, 19-21 May 2010.
Lecture Notes in Computer Science, 6065 LNCS: 184-195.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='parsperrorest.html'>parsperrorest()</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>ecuador</span>) <span class='co'># Muenchow et al. (2012), see ?ecuador</span>
<span class='no'>fo</span> <span class='kw'>&lt;-</span> <span class='no'>slides</span> ~ <span class='no'>dem</span> + <span class='no'>slope</span> + <span class='no'>hcurv</span> + <span class='no'>vcurv</span> + <span class='no'>log.carea</span> + <span class='no'>cslope</span>

<span class='co'># Example of a classification tree fitted to this data:</span>
<span class='fu'>library</span>(<span class='no'>rpart</span>)
<span class='no'>ctrl</span> <span class='kw'>&lt;-</span> <span class='fu'>rpart.control</span>(<span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.005</span>) <span class='co'># show the effects of overfitting</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>rpart</span>(<span class='no'>fo</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>)
<span class='fu'>par</span>(<span class='kw'>xpd</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'>plot</span>(<span class='no'>fit</span>, <span class='kw'>compress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>'Stoyans landslide data set'</span>)</div><div class='input'><span class='fu'>text</span>(<span class='no'>fit</span>, <span class='kw'>use.n</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><img src='sperrorest-3.png' alt='' width='540' height='400' /><div class='input'>
<span class='co'># Non-spatial 5-repeated 10-fold cross-validation:</span>
<span class='no'>mypred.rpart</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>, <span class='no'>newdata</span>) <span class='fu'>predict</span>(<span class='no'>object</span>, <span class='no'>newdata</span>)[, <span class='fl'>2</span>]
<span class='no'>nspres</span> <span class='kw'>&lt;-</span> <span class='fu'>sperrorest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>fo</span>,
                     <span class='kw'>model.fun</span> <span class='kw'>=</span> <span class='no'>rpart</span>, <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>),
                     <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='no'>mypred.rpart</span>,
                     <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.cv</span>,
                     <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>repetition</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>10</span>))</div><div class='output co'>#&gt; Tue Feb  7 14:16:07 2017 Repetition 1 
#&gt; Tue Feb  7 14:16:07 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:08 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:09 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:10 2017 Repetition 2 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:10 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:12 2017 Repetition 3 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:12 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:13 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:13 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:13 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:14 2017 Repetition 4 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:14 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:16 2017 Repetition 5 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:16 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:17 2017 Done.</div><div class='input'><span class='fu'>summary</span>(<span class='no'>nspres</span>$<span class='no'>error.rep</span>)</div><div class='output co'>#&gt;                           mean          sd       median          IQR
#&gt; train.auroc       7.472716e-01 0.004277245 7.479835e-01 0.0019938333
#&gt; train.error       2.945667e-01 0.004479962 2.945000e-01 0.0002222222
#&gt; train.accuracy    7.054333e-01 0.004479962 7.055000e-01 0.0002222222
#&gt; train.sensitivity 6.829778e-01 0.017383901 6.763333e-01 0.0216666667
#&gt; train.specificity 7.278889e-01 0.010551754 7.332222e-01 0.0172222222
#&gt; train.fpr70       2.997778e-01 0.015919745 2.993333e-01 0.0092222222
#&gt; train.fpr80       4.687556e-01 0.024571940 4.701111e-01 0.0236666667
#&gt; train.fpr90       6.647556e-01 0.012259891 6.592222e-01 0.0010000000
#&gt; train.tpr80       5.589111e-01 0.007400534 5.566667e-01 0.0132222222
#&gt; train.tpr90       3.252889e-01 0.012120180 3.287778e-01 0.0184444444
#&gt; train.tpr95       1.846444e-01 0.009841773 1.838889e-01 0.0135555556
#&gt; train.events      9.000000e+03 0.000000000 9.000000e+03 0.0000000000
#&gt; train.count       1.800000e+04 0.000000000 1.800000e+04 0.0000000000
#&gt; test.auroc        6.502489e-01 0.011390730 6.451865e-01 0.0131995000
#&gt; test.error        3.762000e-01 0.015385058 3.825000e-01 0.0215000000
#&gt; test.accuracy     6.238000e-01 0.015385058 6.175000e-01 0.0215000000
#&gt; test.sensitivity  6.046000e-01 0.018447222 6.050000e-01 0.0170000000
#&gt; test.specificity  6.430000e-01 0.028956864 6.370000e-01 0.0220000000
#&gt; test.fpr70        5.000000e-01 0.037188708 5.120000e-01 0.0540000000
#&gt; test.fpr80        6.400000e-01 0.023075962 6.360000e-01 0.0280000000
#&gt; test.fpr90        7.964000e-01 0.021547622 7.840000e-01 0.0320000000
#&gt; test.tpr80        3.928000e-01 0.025449951 3.860000e-01 0.0170000000
#&gt; test.tpr90        1.838000e-01 0.021300235 1.830000e-01 0.0190000000
#&gt; test.tpr95        7.480000e-02 0.016161683 7.100000e-02 0.0120000000
#&gt; test.events       1.000000e+03 0.000000000 1.000000e+03 0.0000000000
#&gt; test.count        2.000000e+03 0.000000000 2.000000e+03 0.0000000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>nspres</span>$<span class='no'>error.fold</span>)</div><div class='output co'>#&gt;                            mean         sd        median        IQR
#&gt; train.auroc          0.74221460 0.01915497    0.74443909 0.02169907
#&gt; train.error          0.29456667 0.01351971    0.29416667 0.01736111
#&gt; train.accuracy       0.70543333 0.01351971    0.70583333 0.01736111
#&gt; train.sensitivity    0.68295508 0.05308884    0.69243140 0.08162716
#&gt; train.specificity    0.72787384 0.04092559    0.73543910 0.05820976
#&gt; train.fpr70          0.43069108 0.20480576    0.33481646 0.19810242
#&gt; train.fpr80          0.58963789 0.15094091    0.51911081 0.20622525
#&gt; train.fpr90          0.74728107 0.08381107    0.74857106 0.15411993
#&gt; train.tpr80          0.50924991 0.07073053    0.51804049 0.08080711
#&gt; train.tpr90          0.14435308 0.09725691    0.11466498 0.08903157
#&gt; train.tpr95          0.10679527 0.05150344    0.10475532 0.05833854
#&gt; train.events       900.00000000 6.14451805  900.00000000 8.00000000
#&gt; train.count       1800.00000000 0.00000000 1800.00000000 0.00000000
#&gt; test.auroc           0.64900506 0.03458457    0.64739445 0.04287726
#&gt; test.error           0.37620000 0.02926933    0.37750000 0.04000000
#&gt; test.accuracy        0.62380000 0.02926933    0.62250000 0.04000000
#&gt; test.sensitivity     0.60465951 0.07057920    0.59807692 0.07664996
#&gt; test.specificity     0.64266408 0.06824941    0.65240275 0.09187511
#&gt; test.fpr70           0.62369998 0.16127893    0.57297352 0.23727491
#&gt; test.fpr80           0.72436521 0.12099176    0.71776912 0.19888114
#&gt; test.fpr90           0.82725454 0.07197629    0.82126845 0.12519062
#&gt; test.tpr80           0.35444742 0.12882387    0.39482831 0.08878706
#&gt; test.tpr90           0.10210100 0.08544656    0.08338941 0.06531795
#&gt; test.tpr95           0.05334693 0.04008048    0.05181486 0.05128959
#&gt; test.events        100.00000000 6.14451805  100.00000000 8.00000000
#&gt; test.count         200.00000000 0.00000000  200.00000000 0.00000000
#&gt; distance            -1.00000000 0.00000000   -1.00000000 0.00000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>nspres</span>$<span class='no'>represampling</span>)</div><div class='output co'>#&gt; $`1`
#&gt;    n.train n.test
#&gt; 1     1800    200
#&gt; 2     1800    200
#&gt; 3     1800    200
#&gt; 4     1800    200
#&gt; 5     1800    200
#&gt; 6     1800    200
#&gt; 7     1800    200
#&gt; 8     1800    200
#&gt; 9     1800    200
#&gt; 10    1800    200
#&gt; 
#&gt; $`2`
#&gt;    n.train n.test
#&gt; 1     1800    200
#&gt; 2     1800    200
#&gt; 3     1800    200
#&gt; 4     1800    200
#&gt; 5     1800    200
#&gt; 6     1800    200
#&gt; 7     1800    200
#&gt; 8     1800    200
#&gt; 9     1800    200
#&gt; 10    1800    200
#&gt; 
#&gt; $`3`
#&gt;    n.train n.test
#&gt; 1     1800    200
#&gt; 2     1800    200
#&gt; 3     1800    200
#&gt; 4     1800    200
#&gt; 5     1800    200
#&gt; 6     1800    200
#&gt; 7     1800    200
#&gt; 8     1800    200
#&gt; 9     1800    200
#&gt; 10    1800    200
#&gt; 
#&gt; $`4`
#&gt;    n.train n.test
#&gt; 1     1800    200
#&gt; 2     1800    200
#&gt; 3     1800    200
#&gt; 4     1800    200
#&gt; 5     1800    200
#&gt; 6     1800    200
#&gt; 7     1800    200
#&gt; 8     1800    200
#&gt; 9     1800    200
#&gt; 10    1800    200
#&gt; 
#&gt; $`5`
#&gt;    n.train n.test
#&gt; 1     1800    200
#&gt; 2     1800    200
#&gt; 3     1800    200
#&gt; 4     1800    200
#&gt; 5     1800    200
#&gt; 6     1800    200
#&gt; 7     1800    200
#&gt; 8     1800    200
#&gt; 9     1800    200
#&gt; 10    1800    200
#&gt; </div><div class='input'><span class='co'># plot(nspres$represampling, ecuador)</span>

<span class='co'># Spatial 5-repeated 10-fold spatial cross-validation:</span>
<span class='no'>spres</span> <span class='kw'>&lt;-</span> <span class='fu'>sperrorest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>ecuador</span>, <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>fo</span>,
                    <span class='kw'>model.fun</span> <span class='kw'>=</span> <span class='no'>rpart</span>, <span class='kw'>model.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>control</span> <span class='kw'>=</span> <span class='no'>ctrl</span>),
                    <span class='kw'>pred.fun</span> <span class='kw'>=</span> <span class='no'>mypred.rpart</span>,
                    <span class='kw'>smp.fun</span> <span class='kw'>=</span> <span class='no'>partition.kmeans</span>,
                    <span class='kw'>smp.args</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>repetition</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>nfold</span> <span class='kw'>=</span> <span class='fl'>10</span>))</div><div class='output co'>#&gt; Tue Feb  7 14:16:17 2017 Repetition 1 
#&gt; Tue Feb  7 14:16:17 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:17 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:17 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:17 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:18 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:19 2017 Repetition 2 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:19 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:20 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:20 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:20 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:21 2017 Repetition 3 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:21 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:22 2017 Repetition 4 
#&gt; Tue Feb  7 14:16:22 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:22 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:22 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:23 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:24 2017 Repetition 5 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 1 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 2 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 3 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 4 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 5 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 6 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 7 
#&gt; Tue Feb  7 14:16:24 2017 - Fold 8 
#&gt; Tue Feb  7 14:16:25 2017 - Fold 9 
#&gt; Tue Feb  7 14:16:25 2017 - Fold 10 
#&gt; Tue Feb  7 14:16:26 2017 Done.</div><div class='input'><span class='fu'>summary</span>(<span class='no'>spres</span>$<span class='no'>error.rep</span>)</div><div class='output co'>#&gt;                           mean          sd       median         IQR
#&gt; train.auroc       7.549125e-01 0.003835574 7.557232e-01 0.001652568
#&gt; train.error       2.897889e-01 0.003181593 2.892778e-01 0.001833333
#&gt; train.accuracy    7.102111e-01 0.003181593 7.107222e-01 0.001833333
#&gt; train.sensitivity 6.983778e-01 0.011791816 7.062222e-01 0.014333333
#&gt; train.specificity 7.220444e-01 0.006640969 7.217778e-01 0.010444444
#&gt; train.fpr70       2.881111e-01 0.011595284 2.852222e-01 0.019000000
#&gt; train.fpr80       4.543111e-01 0.019378523 4.548889e-01 0.033444444
#&gt; train.fpr90       6.493333e-01 0.016398585 6.475556e-01 0.026444444
#&gt; train.tpr80       5.529111e-01 0.005408841 5.547778e-01 0.007666667
#&gt; train.tpr90       3.529556e-01 0.006965789 3.505556e-01 0.004666667
#&gt; train.tpr95       1.064889e-01 0.020277945 1.005556e-01 0.008444444
#&gt; train.events      9.000000e+03 0.000000000 9.000000e+03 0.000000000
#&gt; train.count       1.800000e+04 0.000000000 1.800000e+04 0.000000000
#&gt; test.auroc        5.581284e-01 0.011996500 5.521745e-01 0.015978500
#&gt; test.error        4.515000e-01 0.018910976 4.570000e-01 0.035000000
#&gt; test.accuracy     5.485000e-01 0.018910976 5.430000e-01 0.035000000
#&gt; test.sensitivity  4.686000e-01 0.034616470 4.670000e-01 0.038000000
#&gt; test.specificity  6.284000e-01 0.037433942 6.190000e-01 0.023000000
#&gt; test.fpr70        6.528000e-01 0.026118959 6.520000e-01 0.012000000
#&gt; test.fpr80        7.476000e-01 0.016164777 7.570000e-01 0.029000000
#&gt; test.fpr90        8.676000e-01 0.015868207 8.650000e-01 0.016000000
#&gt; test.tpr80        2.754000e-01 0.052180456 2.930000e-01 0.074000000
#&gt; test.tpr90        1.234000e-01 0.049540892 1.250000e-01 0.096000000
#&gt; test.tpr95        4.120000e-02 0.028717590 4.500000e-02 0.045000000
#&gt; test.events       1.000000e+03 0.000000000 1.000000e+03 0.000000000
#&gt; test.count        2.000000e+03 0.000000000 2.000000e+03 0.000000000</div><div class='input'><span class='fu'>summary</span>(<span class='no'>spres</span>$<span class='no'>represampling</span>)</div><div class='output co'>#&gt; $`1`
#&gt;    n.train n.test
#&gt; 1     1811    189
#&gt; 2     1825    175
#&gt; 3     1787    213
#&gt; 4     1853    147
#&gt; 5     1747    253
#&gt; 6     1836    164
#&gt; 7     1806    194
#&gt; 8     1769    231
#&gt; 9     1790    210
#&gt; 10    1776    224
#&gt; 
#&gt; $`2`
#&gt;    n.train n.test
#&gt; 1     1744    256
#&gt; 2     1755    245
#&gt; 3     1743    257
#&gt; 4     1800    200
#&gt; 5     1835    165
#&gt; 6     1815    185
#&gt; 7     1799    201
#&gt; 8     1847    153
#&gt; 9     1824    176
#&gt; 10    1838    162
#&gt; 
#&gt; $`3`
#&gt;    n.train n.test
#&gt; 1     1744    256
#&gt; 2     1820    180
#&gt; 3     1763    237
#&gt; 4     1778    222
#&gt; 5     1841    159
#&gt; 6     1855    145
#&gt; 7     1771    229
#&gt; 8     1770    230
#&gt; 9     1794    206
#&gt; 10    1864    136
#&gt; 
#&gt; $`4`
#&gt;    n.train n.test
#&gt; 1     1744    256
#&gt; 2     1816    184
#&gt; 3     1762    238
#&gt; 4     1795    205
#&gt; 5     1835    165
#&gt; 6     1833    167
#&gt; 7     1770    230
#&gt; 8     1824    176
#&gt; 9     1812    188
#&gt; 10    1809    191
#&gt; 
#&gt; $`5`
#&gt;    n.train n.test
#&gt; 1     1784    216
#&gt; 2     1791    209
#&gt; 3     1790    210
#&gt; 4     1845    155
#&gt; 5     1826    174
#&gt; 6     1788    212
#&gt; 7     1836    164
#&gt; 8     1860    140
#&gt; 9     1714    286
#&gt; 10    1766    234
#&gt; </div><div class='input'><span class='co'># plot(spres$represampling, ecuador)</span>

<span class='no'>smry</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
     <span class='kw'>nonspat.training</span> <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>nspres</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>train.auroc</span>),
     <span class='kw'>nonspat.test</span>     <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>nspres</span>$<span class='no'>error.rep</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>test.auroc</span>),
     <span class='kw'>spatial.training</span> <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>spres</span>$<span class='no'>error.rep</span>,  <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>train.auroc</span>),
     <span class='kw'>spatial.test</span>     <span class='kw'>=</span> <span class='fu'>unlist</span>(<span class='fu'>summary</span>(<span class='no'>spres</span>$<span class='no'>error.rep</span>,  <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>1</span>)$<span class='no'>test.auroc</span>))
<span class='fu'>boxplot</span>(<span class='no'>smry</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'red'</span>,<span class='st'>'red'</span>,<span class='st'>'red'</span>,<span class='st'>'green'</span>),
        <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>'Training vs. test, nonspatial vs. spatial'</span>,
        <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>'Area under the ROC curve'</span>)</div><img src='sperrorest-19.png' alt='' width='540' height='400' /></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alexander Brenning, Patrick Schratz, Tobias Herrmann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
